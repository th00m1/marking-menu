var M=Object.defineProperty;var x=(s,e,t)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var m=(s,e,t)=>(x(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=t(n);fetch(n.href,c)}})();class S{constructor(e,t){m(this,"menu");m(this,"items");m(this,"subItems");m(this,"subMenu");m(this,"position",{x:0,y:0});m(this,"subMenuPosition",{x:0,y:0});m(this,"selectedItem");this.menu=e,this.items=[...this.menu.querySelectorAll(".item")],this.subMenu=t,this.subItems=[...this.subMenu.querySelectorAll(".sub-menu__item")]}getSelectedItem(){return this.selectedItem}setSelectedItem(e){const i=this.subItems[e].innerHTML;return this.selectedItem=i,i}displayMenu(){this.menu.classList.add("menu--open")}closeMenu(){this.menu.classList.remove("menu--open")}setPosition(e){this.position=e,this.menu.style.top=`${e.y}px`,this.menu.style.left=`${e.x}px`}setSubMenuPosition(e){this.subMenuPosition=e,this.subMenu.style.top=`${e.y}px`,this.subMenu.style.left=`${e.x}px`}getPosition(){return this.position}getSubMenuPosition(){return this.subMenuPosition}isOpen(){return this.menu.classList.contains("menu--open")||this.subMenu.classList.contains("sub-menu--open")}isSubMenuOpen(){return this.subMenu.classList.contains("sub-menu--open")}setItemHoverClass(e,t=this.items){const i=this.getItemHover(e);for(let n=0;n<t.length;n++)n===i?this.items[n].classList.add("item--active"):this.items[n].classList.remove("item--active")}getItemActive(e){const t=this.getItemHover(e),i=20,n=this.getItemCenter(t);return Math.hypot(Math.abs(e.x-n.x),Math.abs(e.y-n.y))<i?{direction:t,itemCenter:n}:null}openSubMenu(e){this.setSubMenuPosition(e),this.subMenu.classList.add("sub-menu--open")}closeSubMenu(){this.subMenu.classList.remove("sub-menu--open")}closeAll(){this.closeMenu(),this.closeSubMenu()}getItemHover(e){const i=Math.atan2(e.y-this.position.y,e.x-this.position.x)*180/Math.PI;return i<45&&i>-45?1:i>=45&&i<=135?2:i>135||i<-135?3:0}getItemCenter(e){const t=this.isSubMenuOpen()?this.subItems:this.items,n=(this.isSubMenuOpen(),t[e]).getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2}}}class I{constructor(e){this.container=e}success(e){this.createToaster(e,!0)}error(){this.createToaster("Symbol is not valid, unable to select an item",!1)}createToaster(e,t){const i=this.fromHTML(`
      <div class="toaster ${t?"success":"error"}">
        <div class="icon"></div>
        <div class="content">${e}</div>
      </div>
      `);this.container.appendChild(i),this.setupTimeout(i)}fromHTML(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}setupTimeout(e){setTimeout(()=>{this.container.removeChild(e)},1500)}}const l=document.getElementById("canvas"),o=l.getContext("2d"),u=new S(document.querySelector(".menu"),document.querySelector(".sub-menu")),f=new I(document.getElementById("toasters"));let p=!1,r={x:0,y:0},h=null,a=[];document.addEventListener("mousedown",s=>{o.clearRect(0,0,l.width,l.height),p=!0,r=b(s),h=setTimeout(()=>{u.setPosition(r),u.displayMenu()},250)});document.addEventListener("mouseup",async()=>{if(g(),p=!1,await v(1),u.isOpen())u.closeAll();else{const s=L(a[0],a[Math.round(a.length/2)],a[a.length-1]);f.success(s)}a=[],o.clearRect(0,0,l.width,l.height)});document.addEventListener("mousemove",s=>{if(p){if(g(),u.isOpen()){o.clearRect(0,0,l.width,l.height),u.isSubMenuOpen()&&(o.beginPath(),o.lineWidth=4,o.lineCap="round",o.lineJoin="round",o.strokeStyle="black",o.moveTo(u.getPosition().x,u.getPosition().y),o.lineTo(u.getSubMenuPosition().x,u.getSubMenuPosition().y),o.stroke()),o.beginPath(),o.lineWidth=4,o.lineCap="round",o.lineJoin="round",o.strokeStyle="black";const{x:e,y:t}=u.isSubMenuOpen()?u.getSubMenuPosition():u.getPosition();o.moveTo(e,t),r=b(s),o.lineTo(r.x,r.y),u.setItemHoverClass(r);const i=u.getItemActive(r);if(i&&u.isSubMenuOpen()){const n=u.setSelectedItem(i.direction);f.success(n),u.closeAll()}else i&&(u.closeMenu(),u.openSubMenu(i.itemCenter));o.stroke()}u.isOpen()||(o.beginPath(),o.lineWidth=4,o.lineCap="round",o.lineJoin="round",o.strokeStyle="black",o.moveTo(r.x,r.y),a.push({x:r.x,y:r.y}),r=b(s),o.lineTo(r.x,r.y),o.stroke())}});window.addEventListener("resize",()=>{y()});const y=()=>{l.width=document.documentElement.clientWidth,l.height=document.documentElement.clientHeight},b=s=>{const e=s.clientX-l.offsetLeft,t=s.clientY-l.offsetTop;return{x:e,y:t}},v=s=>new Promise(e=>setTimeout(e,s*1e3)),g=()=>{h&&(clearTimeout(h),h=null)};y();const L=(s,e,t)=>T(s,e,t)?s.x<t.x?"Sub Item 2":"Sub Item 4":P(s,e,t)?s.y>t.y?"Sub Item 1":"Sub Item 3":s.x<t.x&&s.y<t.y||s.x<t.x&&s.y>t.y?"Sub Item 2":s.x>t.x&&s.y>t.y||s.x>t.x&&s.y<t.y?"Sub Item 4":"",T=(s,e,t)=>Math.abs(s.y-e.y)<=50&&Math.abs(s.y-t.y)<=50,P=(s,e,t)=>Math.abs(s.x-e.x)<=50&&Math.abs(s.x-t.x)<=50;
